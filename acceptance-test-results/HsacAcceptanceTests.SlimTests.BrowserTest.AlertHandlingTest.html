<html><head><title>HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest</h2></header><article><br/>This test ensures we can deal with alerts.<br/><br/><span class="meta">variable defined: HTML= {{{
&lt;html&gt;
&lt;body&gt;
&lt;button onclick="confirm('Hello');"&gt;Open alert&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;}}} </span>
<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td><pre>
&lt;html&gt;
&lt;body&gt;
&lt;button onclick="confirm('Hello');"&gt;Open alert&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></td>
	</tr>
	<tr class="slimRowColor6">
		<td>$url&lt;-[http://127.0.1.1:8000/FitNesseMock]</td>
		<td>get mock server url</td>
	</tr>
</table>
<br/><table>
	<tr>
		<td>storyboard</td>
		<td colspan="2"><span class="pass">browser test</span></td>
	</tr>
	<tr>
		<td><span class="pass">open</span></td>
		<td colspan="2">$url->[http://127.0.1.1:8000/FitNesseMock]</td>
	<td><a href="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-001.png"><img src="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-001.png" title="/home/travis/build/fhoeben/hsac-fitnesse-fixtures/target/fitnesse-results/files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-001.png" height="200"/></a></td></tr>
	<tr>
		<td>seconds before timeout</td>
		<td colspan="2">1</td>
	<td><a href="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-002.png"><img src="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-002.png" title="/home/travis/build/fhoeben/hsac-fitnesse-fixtures/target/fitnesse-results/files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-002.png" height="200"/></a></td></tr>
	<tr>
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">null</span></td>
	<td><a href="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-003.png"><img src="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-003.png" title="/home/travis/build/fhoeben/hsac-fitnesse-fixtures/target/fitnesse-results/files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-003.png" height="200"/></a></td></tr>
	<tr>
		<td><span class="pass">click</span></td>
		<td colspan="2">Open alert</td>
	<td><div><strong>Unable to take screenshot</strong>, alert is active. Alert text:<br/>'<span>Hello</span>'</div></td></tr>
	<tr>
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">Hello</span></td>
	<td><div><strong>Unable to take screenshot</strong>, alert is active. Alert text:<br/>'<span>Hello</span>'</div></td></tr>
	<tr>
		<td colspan="3"><span class="pass">dismiss alert</span></td>
	<td><a href="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-006.png"><img src="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-006.png" title="/home/travis/build/fhoeben/hsac-fitnesse-fixtures/target/fitnesse-results/files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-006.png" height="200"/></a></td></tr>
	<tr>
		<td><span class="pass">click</span></td>
		<td colspan="2">Open alert</td>
	<td><div><strong>Unable to take screenshot</strong>, alert is active. Alert text:<br/>'<span>Hello</span>'</div></td></tr>
	<tr>
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">Hello</span></td>
	<td><div><strong>Unable to take screenshot</strong>, alert is active. Alert text:<br/>'<span>Hello</span>'</div></td></tr>
	<tr>
		<td colspan="3"><span class="pass">confirm alert</span></td>
	<td><a href="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-009.png"><img src="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-009.png" title="/home/travis/build/fhoeben/hsac-fitnesse-fixtures/target/fitnesse-results/files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-009.png" height="200"/></a></td></tr>
	<tr>
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">null</span></td>
	<td><a href="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-010.png"><img src="files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-010.png" title="/home/travis/build/fhoeben/hsac-fitnesse-fixtures/target/fitnesse-results/files/screenshots/storyboard/HsacAcceptanceTests.SlimTests.BrowserTest.AlertHandlingTest/01-010.png" height="200"/></a></td></tr>
</table>
<br/><h2 id="Alertfromiframe">Alert from iframe</h2>
<br/>When we traverse inside iframes and hit an alert we can't go back up the chain to the original frame, because the alert is open.<br/>We have to go back when the alert has been handled.<br/><br/><span class="meta">variable defined: HTML_MAIN= {{{
&lt;html&gt;
&lt;title&gt;Start Page Title&lt;/title&gt;
&lt;body&gt;
&lt;input name="remove" type="button" value="Remove"&gt;
&lt;iframe id="iframe1" src="frame1.html"&gt;&lt;/iframe&gt;
&lt;/body&gt;
&lt;/html&gt;}}} </span>
<br/><br/><span class="meta">variable defined: HTML_FRAME1= {{{
&lt;html&gt;
&lt;body&gt;
&lt;button onclick="confirm('Hello');"&gt;Open alert&lt;/button&gt;
&lt;iframe id="iframe1_1" src="frame1_1.html"&gt;&lt;/iframe&gt;
&lt;/body&gt;
&lt;/html&gt;}}} </span>
<br/><br/><span class="meta">variable defined: HTML_FRAME2= {{{
&lt;html&gt;
&lt;body&gt;
&lt;button onclick="confirm('Bye');"&gt;Open alert 2&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;}}} </span>
<br/><br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td colspan="3"><pre>
&lt;html&gt;
&lt;title&gt;Start Page Title&lt;/title&gt;
&lt;body&gt;
&lt;input name="remove" type="button" value="Remove"&gt;
&lt;iframe id="iframe1" src="frame1.html"&gt;&lt;/iframe&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td><pre>
&lt;html&gt;
&lt;body&gt;
&lt;button onclick="confirm('Hello');"&gt;Open alert&lt;/button&gt;
&lt;iframe id="iframe1_1" src="frame1_1.html"&gt;&lt;/iframe&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></td>
		<td>for</td>
		<td>GET: /FitNesseMock/frame1.html</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td><pre>
&lt;html&gt;
&lt;body&gt;
&lt;button onclick="confirm('Bye');"&gt;Open alert 2&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></td>
		<td>for</td>
		<td>GET: /FitNesseMock/frame1_1.html</td>
	</tr>
	<tr class="slimRowColor6">
		<td>$url&lt;-[http://127.0.1.1:8000/FitNesseMock]</td>
		<td colspan="3">get mock server url</td>
	</tr>
</table>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="2"><span class="pass">browser test</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">open</span></td>
		<td colspan="2">$url->[http://127.0.1.1:8000/FitNesseMock]/main</td>
	</tr>
	<tr class="slimRowColor7">
		<td>seconds before timeout</td>
		<td colspan="2">2</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">null</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">click</span></td>
		<td colspan="2">Open alert 2</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">Bye</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td colspan="3"><span class="pass">confirm alert</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="2">we should be able to click Remove because we are back at top level</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">click</span></td>
		<td colspan="2">Remove</td>
	</tr>
	<tr class="slimRowColor2">
		<td><span class="pass">switch to frame</span></td>
		<td colspan="2">id=iframe1</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">click</span></td>
		<td colspan="2">Open alert 2</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">Bye</span></td>
	</tr>
	<tr class="slimRowColor2">
		<td colspan="3"><span class="pass">dismiss alert</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="2">we should be unable to click Remove because we are back at level 1</td>
	</tr>
	<tr class="slimRowColor7">
		<td><span class="pass">reject</span></td>
		<td>click if available</td>
		<td>Remove</td>
	</tr>
	<tr class="slimRowColor5">
		<td colspan="3">switch to default content</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">click</span></td>
		<td colspan="2">Open alert</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>alert text</td>
		<td><span class="pass">Hello</span></td>
	</tr>
	<tr class="slimRowColor2">
		<td colspan="3"><span class="pass">dismiss alert</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="2">we should be able to click Remove because we are back at top level</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">click</span></td>
		<td colspan="2">Remove</td>
	</tr>
</table>
<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td colspan="2">stop</td>
	</tr>
</table>
<br/></article></body></html>
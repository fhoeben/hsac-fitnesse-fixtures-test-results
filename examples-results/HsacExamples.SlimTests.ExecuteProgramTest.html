<html><head><title>HsacExamples.SlimTests.ExecuteProgramTest</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>HsacExamples.SlimTests.ExecuteProgramTest</h2></header><article><br/>This page demonstrates the usage of ExecuteProgramTest, which allows you to run a program and inspect its output.<br/><br/><p class="note">The program will be executed on the machine which hosts the Slim process.</p><br/>We can run a program with some arguments, check its exit code and show its output.<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">execute program test</span></td>
	</tr>
	<tr class="slimRowColor2">
		<td>set</td>
		<td>-c</td>
		<td>as argument</td>
		<td>0</td>
	</tr>
	<tr class="slimRowColor2">
		<td>set</td>
		<td>ls -l /</td>
		<td>as argument</td>
		<td>1</td>
	</tr>
	<tr class="slimRowColor5">
		<td><span class="pass">execute</span></td>
		<td colspan="3">/bin/bash</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>exit code</td>
		<td colspan="2"><span class="pass">0</span></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="3">standard out</td>
	<td><pre>total 200180
drwxr-xr-x   2 root   root        4096 Aug 11 13:13 bin
drwxr-xr-x   3 root   root        4096 Aug 11 13:29 boot
drwxr-xr-x  16 root   root        3580 Oct 26 10:24 dev
drwxr-xr-x 114 root   root        4096 Oct 26 10:24 etc
drwxr-xr-x  16 root   root        4096 Oct 26 10:24 home
lrwxrwxrwx   1 root   root          31 Aug 11 13:29 initrd.img -&gt; boot/initrd.img-4.15.0-1037-gcp
lrwxrwxrwx   1 root   root          33 Aug 11 13:29 initrd.img.old -&gt; boot/initrd.img-4.4.0-157-generic
-rw-r--r--   1 root   root   204892533 Jun 28  2018 jdk.tar.gz
drwxr-xr-x  22 root   root        4096 Aug 11 13:32 lib
drwxr-xr-x   2 root   root        4096 Aug 11 13:05 lib64
drwx------   2 root   root       16384 Oct 23  2018 lost+found
drwxr-xr-x   2 root   root        4096 Oct 23  2018 media
drwxr-xr-x   2 root   root        4096 Oct 23  2018 mnt
drwxr-xr-x   5 travis travis      4096 Aug 11 13:32 opt
dr-xr-xr-x 113 root   root           0 Oct 26 10:24 proc
drwx------   5 root   root        4096 Aug 11 13:29 root
drwxr-xr-x  26 root   root        1000 Oct 26 10:24 run
drwxr-xr-x   2 root   root       12288 Aug 11 13:13 sbin
drwxr-xr-x   2 root   root        4096 Aug 11 13:03 snap
drwxr-xr-x   2 root   root        4096 Oct 23  2018 srv
dr-xr-xr-x  13 root   root           0 Oct 26 10:42 sys
drwxrwxrwt  12 root   root        4096 Oct 26 11:01 tmp
drwxr-xr-x  12 root   root        4096 Aug 11 13:11 usr
drwxr-xr-x  14 root   root        4096 Aug 11 13:23 var
lrwxrwxrwx   1 root   root          28 Aug 11 13:29 vmlinuz -&gt; boot/vmlinuz-4.15.0-1037-gcp
lrwxrwxrwx   1 root   root          30 Aug 11 13:29 vmlinuz.old -&gt; boot/vmlinuz-4.4.0-157-generic
</pre></td></tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>standard error</td>
		<td colspan="2"><span class="pass">BLANK</span></td>
	</tr>
</table>
<br/>The default timeout for program execution is one minute, but we can set a custom timeout. Furthermore we can control the directory it is invoked from, set all arguments using a list and get its output 'unformatted'.<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="2"><span class="pass">execute program test</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>timeout</td>
		<td><span class="pass">60000</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td>set timeout of</td>
		<td>100</td>
		<td>milliseconds</td>
	</tr>
	<tr class="slimRowColor6">
		<td>set working directory</td>
		<td colspan="2">/</td>
	</tr>
	<tr class="slimRowColor2">
		<td>set</td>
		<td>-c, ls -l</td>
		<td>as arguments</td>
	</tr>
	<tr class="slimRowColor5">
		<td><span class="pass">execute</span></td>
		<td colspan="2">/bin/bash</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>exit code</td>
		<td><span class="pass">0</span></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="2">raw standard out</td>
	<td>total 200180
drwxr-xr-x   2 root   root        4096 Aug 11 13:13 bin
drwxr-xr-x   3 root   root        4096 Aug 11 13:29 boot
drwxr-xr-x  16 root   root        3580 Oct 26 10:24 dev
drwxr-xr-x 114 root   root        4096 Oct 26 10:24 etc
drwxr-xr-x  16 root   root        4096 Oct 26 10:24 home
lrwxrwxrwx   1 root   root          31 Aug 11 13:29 initrd.img -&gt; boot/initrd.img-4.15.0-1037-gcp
lrwxrwxrwx   1 root   root          33 Aug 11 13:29 initrd.img.old -&gt; boot/initrd.img-4.4.0-157-generic
-rw-r--r--   1 root   root   204892533 Jun 28  2018 jdk.tar.gz
drwxr-xr-x  22 root   root        4096 Aug 11 13:32 lib
drwxr-xr-x   2 root   root        4096 Aug 11 13:05 lib64
drwx------   2 root   root       16384 Oct 23  2018 lost+found
drwxr-xr-x   2 root   root        4096 Oct 23  2018 media
drwxr-xr-x   2 root   root        4096 Oct 23  2018 mnt
drwxr-xr-x   5 travis travis      4096 Aug 11 13:32 opt
dr-xr-xr-x 113 root   root           0 Oct 26 10:24 proc
drwx------   5 root   root        4096 Aug 11 13:29 root
drwxr-xr-x  26 root   root        1000 Oct 26 10:24 run
drwxr-xr-x   2 root   root       12288 Aug 11 13:13 sbin
drwxr-xr-x   2 root   root        4096 Aug 11 13:03 snap
drwxr-xr-x   2 root   root        4096 Oct 23  2018 srv
dr-xr-xr-x  13 root   root           0 Oct 26 10:42 sys
drwxrwxrwt  12 root   root        4096 Oct 26 11:01 tmp
drwxr-xr-x  12 root   root        4096 Aug 11 13:11 usr
drwxr-xr-x  14 root   root        4096 Aug 11 13:23 var
lrwxrwxrwx   1 root   root          28 Aug 11 13:29 vmlinuz -&gt; boot/vmlinuz-4.15.0-1037-gcp
lrwxrwxrwx   1 root   root          30 Aug 11 13:29 vmlinuz.old -&gt; boot/vmlinuz-4.4.0-157-generic
</td></tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>raw standard error</td>
		<td><span class="pass">BLANK</span></td>
	</tr>
</table>
<br/>The timeout can also be set in seconds, and pass environment variables (and the process's output is escaped to ensure it is displayed properly).<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">execute program test</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td>set timeout of</td>
		<td>1</td>
		<td colspan="2">seconds</td>
	</tr>
	<tr class="slimRowColor5">
		<td>set value</td>
		<td>Hi <there></td>
		<td>for</td>
		<td>BLA</td>
	</tr>
	<tr class="slimRowColor2">
		<td>set</td>
		<td>-c</td>
		<td>as argument</td>
		<td>0</td>
	</tr>
	<tr class="slimRowColor2">
		<td>set</td>
		<td>echo ${BLA}</td>
		<td>as argument</td>
		<td>1</td>
	</tr>
	<tr class="slimRowColor5">
		<td><span class="pass">execute</span></td>
		<td colspan="3">/bin/bash</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>exit code</td>
		<td colspan="2"><span class="pass">0</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>raw standard out</td>
		<td colspan="2"><span class="pass">Hi &lt;there&gt;
</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>standard out</td>
		<td colspan="2"><span class="pass"><pre>Hi &lt;there&gt;
</pre></span></td>
	</tr>
</table>
<br/></article></body></html>